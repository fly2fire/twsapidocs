<!-- HTML header for doxygen 1.8.4-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.4"/>
<title>TWS API v9.72: Basic Orders</title>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="https://www.interactivebrokers.com/favicon.ico" rel="shortcut icon">
<script>
$(document).ready(function(){
		var picked=getCookie("picked");
		if (picked != "") {
			if (!$(this).hasClass("active")) {
				var tabNum = $(this).index();
				var nthChild = picked;
				$("ul#tabs li.active").removeClass("active");
				$(this).addClass("active");
				$("ul#tab li.active").removeClass("active");
				$("ul#tab li:nth-child("+nthChild+")").addClass("active");
				$("ul#tabs li:nth-child("+nthChild+")").addClass("active");
				setCookie("picked", nthChild, 1);
			}
		}
		$("ul#tabs li").click(function(e){
			if (!$(this).hasClass("active")) {
			var tabNum = $(this).index();
			var nthChild = tabNum+1;
			$("ul#tabs li.active").removeClass("active");
			$(this).addClass("active");
			$("ul#tab li.active").removeClass("active");
			$("ul#tab li:nth-child("+nthChild+")").addClass("active");
			setCookie("picked", nthChild, 1);
		}
    });
});
function setCookie(cname, cvalue, exdays) {
    var d = new Date();
    d.setTime(d.getTime() + (exdays*24*60*60*1000));
    var expires = "expires="+d.toUTCString();
    document.cookie = cname + "=" + cvalue + "; " + expires;
} 
function getCookie(cname) {
    var name = cname + "=";
    var ca = document.cookie.split(';');
    for(var i=0; i<ca.length; i++) {
        var c = ca[i];
        while (c.charAt(0)==' ') c = c.substring(1);
        if (c.indexOf(name) == 0) return c.substring(name.length,c.length);
    }
    return "";
} 
function checkCookie() {
    var picked=getCookie("picked");
    if (picked != "") {
        alert("Welcome again " + picked);
    }else{
        //username = prompt("Please enter your name:", "");
        if (picked != "" && picked != null) {
            setCookie("picked", 1, 365);
        }
    }
}
</script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="ib_theme.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea" style="background-color:black;">
<table cellspacing="0" cellpadding="0" >
 <tbody>
 <tr>
  <td id="projectlogo"><img alt="Logo" src="nav_iblogo.png"/></a></td>
  <td style="padding: 0 0 0 1em;">
   <ul id="tabs"><li class="active">C#</li><li>Java</li><li>VB</li><li>C++</li></ul>
  </td>
  <td><a href="mailto:api@interactivebrokers.com?subject=TWS API Documentation" style="color:#C7C7C7;font-weight:bold;padding: 0 0 0 1em;">Contact us</a></td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.4 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('basic_orders.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Properties</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Basic Orders </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="auction"></a>
Auction</h1>
<p>An <a href="https://www.interactivebrokers.com/en/index.php?f=578" target="_blank" class="linkexternal">Auction</a> order is entered into the electronic trading system during the pre-market opening period for execution at the Calculated Opening Price (COP). If your order is not filled on the open, the order is re-submitted as a limit order with the limit price set to the COP or the best bid/ask after the market opens. </p>
<ul>
<li>
Products: FUT, STK </li>
<li>
<a href="https://www.interactivebrokers.com/en/index.php?f=3883?ot=auc" target="_blank" class="linkexternal">Supported exchanges</a> </li>
</ul>
<ul id="tab">
<li class="active">
<div class="fragment"><div class="line">            Order order = <span class="keyword">new</span> Order();</div>
<div class="line">            order.Action = action;</div>
<div class="line">            order.Tif = <span class="stringliteral">&quot;AUC&quot;</span>;</div>
<div class="line">            order.OrderType = <span class="stringliteral">&quot;MTL&quot;</span>;</div>
<div class="line">            order.TotalQuantity = quantity;</div>
<div class="line">            order.LmtPrice = price;</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">        Order order = <span class="keyword">new</span> Order();</div>
<div class="line">        order.action(action);</div>
<div class="line">        order.tif(<span class="stringliteral">&quot;AUC&quot;</span>);</div>
<div class="line">        order.orderType(<span class="stringliteral">&quot;MTL&quot;</span>);</div>
<div class="line">        order.totalQuantity(quantity);</div>
<div class="line">        order.lmtPrice(price);</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">            Dim order As Order = New Order</div>
<div class="line">            order.Action = action</div>
<div class="line">            order.Tif = <span class="stringliteral">&quot;AUC&quot;</span></div>
<div class="line">            order.OrderType = <span class="stringliteral">&quot;MTL&quot;</span></div>
<div class="line">            order.TotalQuantity = quantity</div>
<div class="line">            order.LmtPrice = price</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">    Order order;</div>
<div class="line">    order.action = action;</div>
<div class="line">    order.tif = <span class="stringliteral">&quot;AUC&quot;</span>;</div>
<div class="line">    order.orderType = <span class="stringliteral">&quot;MTL&quot;</span>;</div>
<div class="line">    order.totalQuantity = quantity;</div>
<div class="line">    order.lmtPrice = price;</div>
</div><!-- fragment -->  </li>
</ul>
<h1><a class="anchor" id="discretionary"></a>
Discretionary</h1>
<p>An <a href="https://www.interactivebrokers.com/en/index.php?f=585" target="_blank" class="linkexternal">Discretionary</a> order is a limit order submitted with a hidden, specified 'discretionary' amount off the limit price which may be used to increase the price range over which the limit order is eligible to execute. The market sees only the limit price. </p>
<ul>
<li>
Products: STK </li>
<li>
<a href="https://www.interactivebrokers.com/en/index.php?f=3883?ot=dis" target="_blank" class="linkexternal">Supported exchanges</a> </li>
</ul>
<ul id="tab">
<li class="active">
<div class="fragment"><div class="line">            Order order = <span class="keyword">new</span> Order();</div>
<div class="line">            order.Action = action;</div>
<div class="line">            order.OrderType = <span class="stringliteral">&quot;LMT&quot;</span>;</div>
<div class="line">            order.TotalQuantity = quantity;</div>
<div class="line">            order.LmtPrice = price;</div>
<div class="line">            order.DiscretionaryAmt = discretionaryAmount;</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">        Order order = <span class="keyword">new</span> Order();</div>
<div class="line">        order.action(action);</div>
<div class="line">        order.orderType(<span class="stringliteral">&quot;LMT&quot;</span>);</div>
<div class="line">        order.totalQuantity(quantity);</div>
<div class="line">        order.lmtPrice(price);</div>
<div class="line">        order.discretionaryAmt(discretionaryAmt);</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">            Dim order As Order = New Order</div>
<div class="line">            order.Action = action</div>
<div class="line">            order.OrderType = <span class="stringliteral">&quot;LMT&quot;</span></div>
<div class="line">            order.TotalQuantity = quantity</div>
<div class="line">            order.LmtPrice = price</div>
<div class="line">            order.DiscretionaryAmt = discretionaryAmount</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">    Order order;</div>
<div class="line">    order.action = action;</div>
<div class="line">    order.orderType = <span class="stringliteral">&quot;LMT&quot;</span>;</div>
<div class="line">    order.totalQuantity = quantity;</div>
<div class="line">    order.lmtPrice = price;</div>
<div class="line">    order.discretionaryAmt = discretionaryAmount;</div>
</div><!-- fragment -->  </li>
</ul>
<h1><a class="anchor" id="market"></a>
Market</h1>
<p>A <a href="https://www.interactivebrokers.com/en/index.php?f=602" target="_blank" class="linkexternal">Market</a> order is an order to buy or sell at the market bid or offer price. A market order may increase the likelihood of a fill and the speed of execution, but unlike the Limit order a Market order provides no price protection and may fill at a price far lower/higher than the current displayed bid/ask. </p>
<ul>
<li>
Products: BOND, CFD, EFP, CASH, FUND, FUT, FOP, OPT, STK, WAR </li>
<li>
<a href="https://www.interactivebrokers.com/en/index.php?f=3883?ot=mkt" target="_blank" class="linkexternal">Supported exchanges</a> </li>
</ul>
<ul id="tab">
<li class="active">
<div class="fragment"><div class="line">            Order order = <span class="keyword">new</span> Order();</div>
<div class="line">            order.Action = action;</div>
<div class="line">            order.OrderType = <span class="stringliteral">&quot;MKT&quot;</span>;</div>
<div class="line">            order.TotalQuantity = quantity;</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">        Order order = <span class="keyword">new</span> Order();</div>
<div class="line">        order.action(action);</div>
<div class="line">        order.orderType(<span class="stringliteral">&quot;MKT&quot;</span>);</div>
<div class="line">        order.totalQuantity(quantity);</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">            Dim order As Order = New Order</div>
<div class="line">            order.Action = action</div>
<div class="line">            order.OrderType = <span class="stringliteral">&quot;MKT&quot;</span></div>
<div class="line">            order.TotalQuantity = quantity</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">    Order order;</div>
<div class="line">    order.action = action;</div>
<div class="line">    order.orderType = <span class="stringliteral">&quot;MKT&quot;</span>;</div>
<div class="line">    order.totalQuantity = quantity;</div>
</div><!-- fragment -->  </li>
</ul>
<h1><a class="anchor" id="market_if_touched"></a>
Market If Touched</h1>
<p>A <a href="https://www.interactivebrokers.com/en/index.php?f=600" target="_blank" class="linkexternal">Market If Touched</a> (MIT) is an order to buy (or sell) a contract below (or above) the market. Its purpose is to take advantage of sudden or unexpected changes in share or other prices and provides investors with a trigger price to set an order in motion. Investors may be waiting for excessive strength (or weakness) to cease, which might be represented by a specific price point. MIT orders can be used to determine whether or not to enter the market once a specific price level has been achieved. This order is held in the system until the trigger price is touched, and is then submitted as a market order. An MIT order is similar to a stop order, except that an MIT sell order is placed above the current market price, and a stop sell order is placed below </p>
<ul>
<li>
Products: BOND, CFD, CASH, FUT, FOP, OPT, STK, WAR </li>
<li>
<a href="https://www.interactivebrokers.com/en/index.php?f=3883?ot=mit" target="_blank" class="linkexternal">Supported exchanges</a> </li>
</ul>
<ul id="tab">
<li class="active">
<div class="fragment"><div class="line">            Order order = <span class="keyword">new</span> Order();</div>
<div class="line">            order.Action = action;</div>
<div class="line">            order.OrderType = <span class="stringliteral">&quot;MIT&quot;</span>;</div>
<div class="line">            order.TotalQuantity = quantity;</div>
<div class="line">            order.AuxPrice = price;</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">        Order order = <span class="keyword">new</span> Order();</div>
<div class="line">        order.action(action);</div>
<div class="line">        order.orderType(<span class="stringliteral">&quot;MIT&quot;</span>);</div>
<div class="line">        order.totalQuantity(quantity);</div>
<div class="line">        order.auxPrice(price);</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">            Dim order As Order = New Order</div>
<div class="line">            order.Action = action</div>
<div class="line">            order.OrderType = <span class="stringliteral">&quot;MIT&quot;</span></div>
<div class="line">            order.TotalQuantity = quantity</div>
<div class="line">            order.AuxPrice = price</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">    Order order;</div>
<div class="line">    order.action = action;</div>
<div class="line">    order.orderType = <span class="stringliteral">&quot;MIT&quot;</span>;</div>
<div class="line">    order.totalQuantity = quantity;</div>
<div class="line">    order.auxPrice = price;</div>
</div><!-- fragment -->  </li>
</ul>
<h1><a class="anchor" id="market_on_close"></a>
Market On Close</h1>
<p>A <a href="https://www.interactivebrokers.com/en/index.php?f=599" target="_blank" class="linkexternal">Market On Close</a> (MOC) order is a market order that is submitted to execute as close to the closing price as possible. </p>
<ul>
<li>
Products: CFD, FUT, STK, WAR </li>
<li>
<a href="https://www.interactivebrokers.com/en/index.php?f=3883?ot=moc" target="_blank" class="linkexternal">Supported exchanges</a> </li>
</ul>
<ul id="tab">
<li class="active">
<div class="fragment"><div class="line">            Order order = <span class="keyword">new</span> Order();</div>
<div class="line">            order.Action = action;</div>
<div class="line">            order.OrderType = <span class="stringliteral">&quot;MOC&quot;</span>;</div>
<div class="line">            order.TotalQuantity = quantity;</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">        Order order = <span class="keyword">new</span> Order();</div>
<div class="line">        order.action(action);</div>
<div class="line">        order.orderType(<span class="stringliteral">&quot;MOC&quot;</span>);</div>
<div class="line">        order.totalQuantity(quantity);</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">            Dim order As Order = New Order</div>
<div class="line">            order.Action = action</div>
<div class="line">            order.OrderType = <span class="stringliteral">&quot;MOC&quot;</span></div>
<div class="line">            order.TotalQuantity = quantity</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">    Order order;</div>
<div class="line">    order.action = action;</div>
<div class="line">    order.orderType = <span class="stringliteral">&quot;MOC&quot;</span>;</div>
<div class="line">    order.totalQuantity = quantity;</div>
</div><!-- fragment -->  </li>
</ul>
<h1><a class="anchor" id="market_on_open"></a>
Market On Open</h1>
<p>A <a href="https://www.interactivebrokers.com/en/index.php?f=598" target="_blank" class="linkexternal">Market On Open</a> (MOO) combines a market order with the OPG time in force to create an order that is automatically submitted at the market's open and fills at the market price. </p>
<ul>
<li>
Products: CFD, FUT, STK, WAR </li>
<li>
<a href="https://www.interactivebrokers.com/en/index.php?f=3883?ot=moo" target="_blank" class="linkexternal">Supported exchanges</a> </li>
</ul>
<ul id="tab">
<li class="active">
<div class="fragment"><div class="line">            Order order = <span class="keyword">new</span> Order();</div>
<div class="line">            order.Action = action;</div>
<div class="line">            order.OrderType = <span class="stringliteral">&quot;MKT&quot;</span>;</div>
<div class="line">            order.TotalQuantity = quantity;</div>
<div class="line">            order.Tif = <span class="stringliteral">&quot;OPG&quot;</span>;</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">        Order order = <span class="keyword">new</span> Order();</div>
<div class="line">        order.action(action);</div>
<div class="line">        order.orderType(<span class="stringliteral">&quot;MKT&quot;</span>);</div>
<div class="line">        order.totalQuantity(quantity);</div>
<div class="line">        order.tif(<span class="stringliteral">&quot;OPG&quot;</span>);</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">            Dim order As Order = New Order</div>
<div class="line">            order.Action = action</div>
<div class="line">            order.OrderType = <span class="stringliteral">&quot;MKT&quot;</span></div>
<div class="line">            order.TotalQuantity = quantity</div>
<div class="line">            order.Tif = <span class="stringliteral">&quot;OPG&quot;</span></div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">    Order order;</div>
<div class="line">    order.action = action;</div>
<div class="line">    order.orderType = <span class="stringliteral">&quot;MKT&quot;</span>;</div>
<div class="line">    order.totalQuantity = quantity;</div>
<div class="line">    order.tif = <span class="stringliteral">&quot;OPG&quot;</span>;</div>
</div><!-- fragment -->  </li>
</ul>
<h1><a class="anchor" id="midpoint_match"></a>
Midpoint Match</h1>
<p><a href="https://www.interactivebrokers.com/en/index.php?f=752" target="_blank" class="linkexternal">ISE Midpoint Match</a> (MPM) orders always execute at the midpoint of the NBBO. You can submit market and limit orders direct-routed to ISE for MPM execution. Market orders execute at the midpoint whenever an eligible contra-order is available. Limit orders execute only when the midpoint price is better than the limit price. Standard MPM orders are completely anonymous. </p>
<ul>
<li>
Products: STK (ISE only) </li>
</ul>
<ul id="tab">
<li class="active">
<div class="fragment"><div class="line">            Order order = <span class="keyword">new</span> Order();</div>
<div class="line">            order.Action = action;</div>
<div class="line">            order.OrderType = <span class="stringliteral">&quot;MKT&quot;</span>;</div>
<div class="line">            order.TotalQuantity = quantity;</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">        Order order = <span class="keyword">new</span> Order();</div>
<div class="line">        order.action(action);</div>
<div class="line">        order.orderType(<span class="stringliteral">&quot;MKT&quot;</span>);</div>
<div class="line">        order.totalQuantity(quantity);</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">            Dim order As Order = New Order</div>
<div class="line">            order.Action = action</div>
<div class="line">            order.OrderType = <span class="stringliteral">&quot;MKT&quot;</span></div>
<div class="line">            order.TotalQuantity = quantity</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">    Order order;</div>
<div class="line">    order.action = action;</div>
<div class="line">    order.orderType = <span class="stringliteral">&quot;MKT&quot;</span>;</div>
<div class="line">    order.totalQuantity = quantity;</div>
</div><!-- fragment -->  </li>
</ul>
<h1><a class="anchor" id="pegged_market"></a>
Pegged to Market</h1>
<p>A <a href="https://www.interactivebrokers.com/en/index.php?f=616" target="_blank" class="linkexternal">pegged-to-market order</a> is designed to maintain a purchase price relative to the national best offer (NBO) or a sale price relative to the national best bid (NBB). Depending on the width of the quote, this order may be passive or aggressive. The trader creates the order by entering a limit price which defines the worst limit price that they are willing to accept. Next, the trader enters an offset amount which computes the active limit price as follows: Sell order price = Bid price + offset amount Buy order price = Ask price - offset amount </p>
<ul>
<li>
Products: STK </li>
<li>
<a href="https://www.interactivebrokers.com/en/index.php?f=3883?ot=pegmkt" target="_blank" class="linkexternal">Supported exchanges</a> </li>
</ul>
<ul id="tab">
<li class="active">
<div class="fragment"><div class="line">            Order order = <span class="keyword">new</span> Order();</div>
<div class="line">            order.Action = action;</div>
<div class="line">            order.OrderType = <span class="stringliteral">&quot;PEG MKT&quot;</span>;</div>
<div class="line">            order.TotalQuantity = 100;</div>
<div class="line">            order.AuxPrice = marketOffset;<span class="comment">//Offset price</span></div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">        Order order = <span class="keyword">new</span> Order();</div>
<div class="line">        order.action(action);</div>
<div class="line">        order.orderType(<span class="stringliteral">&quot;PEG MKT&quot;</span>);</div>
<div class="line">        order.totalQuantity(100);</div>
<div class="line">        order.auxPrice(marketOffset);<span class="comment">//Offset price</span></div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">            Dim order As Order = New Order</div>
<div class="line">            order.Action = action</div>
<div class="line">            order.OrderType = <span class="stringliteral">&quot;PEG MKT&quot;</span></div>
<div class="line">            order.TotalQuantity = 100</div>
<div class="line">            order.AuxPrice = marketOffset <span class="stringliteral">&#39; Offset price</span></div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">    Order order;</div>
<div class="line">    order.action = action;</div>
<div class="line">    order.orderType = <span class="stringliteral">&quot;PEG MKT&quot;</span>;</div>
<div class="line">    order.totalQuantity = quantity;</div>
<div class="line">    order.auxPrice = marketOffset;</div>
</div><!-- fragment -->  </li>
</ul>
<h1><a class="anchor" id="pegged_stock"></a>
Pegged to Stock</h1>
<p>A <a href="https://www.interactivebrokers.com/en/index.php?f=615" target="_blank" class="linkexternal">Pegged to Stock</a> order continually adjusts the option order price by the product of a signed user-define delta and the change of the option's underlying stock price. The delta is entered as an absolute and assumed to be positive for calls and negative for puts. A buy or sell call order price is determined by adding the delta times a change in an underlying stock price to a specified starting price for the call. To determine the change in price, the stock reference price is subtracted from the current NBBO midpoint. The Stock Reference Price can be defined by the user, or defaults to the NBBO midpoint at the time of the order if no reference price is entered. You may also enter a high/low stock price range which cancels the order when reached. The delta times the change in stock price will be rounded to the nearest penny in favor of the order. </p>
<ul>
<li>
Products: OPT </li>
<li>
<a href="https://www.interactivebrokers.com/en/index.php?f=3883?ot=relstk" target="_blank" class="linkexternal">Supported exchanges</a> </li>
</ul>
<ul id="tab">
<li class="active">
<div class="fragment"><div class="line">            Order order = <span class="keyword">new</span> Order();</div>
<div class="line">            order.Action = action;</div>
<div class="line">            order.OrderType = <span class="stringliteral">&quot;PEG STK&quot;</span>;</div>
<div class="line">            order.TotalQuantity = quantity;</div>
<div class="line">            order.Delta = delta;</div>
<div class="line">            order.LmtPrice = stockReferencePrice;</div>
<div class="line">            order.StartingPrice = startingPrice;</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">        Order order = <span class="keyword">new</span> Order();</div>
<div class="line">        order.action(action);</div>
<div class="line">        order.orderType(<span class="stringliteral">&quot;PEG STK&quot;</span>);</div>
<div class="line">        order.totalQuantity(quantity);</div>
<div class="line">        order.delta(delta);</div>
<div class="line">        order.lmtPrice(stockReferencePrice);</div>
<div class="line">        order.startingPrice(startingPrice);</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">            Dim order As Order = New Order</div>
<div class="line">            order.Action = action</div>
<div class="line">            order.OrderType = <span class="stringliteral">&quot;PEG STK&quot;</span></div>
<div class="line">            order.TotalQuantity = quantity</div>
<div class="line">            order.Delta = delta</div>
<div class="line">            order.LmtPrice = stockReferencePrice</div>
<div class="line">            order.StartingPrice = startingPrice</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">    Order order;</div>
<div class="line">    order.action = action;</div>
<div class="line">    order.orderType = <span class="stringliteral">&quot;PEG STK&quot;</span>;</div>
<div class="line">    order.totalQuantity = quantity;</div>
<div class="line">    order.delta = delta;</div>
<div class="line">    order.lmtPrice = stockReferencePrice;</div>
<div class="line">    order.startingPrice = startingPrice;</div>
</div><!-- fragment -->  </li>
</ul>
<h1><a class="anchor" id="relative_pegged_primary"></a>
Pegged to Primary</h1>
<p><a href="https://www.interactivebrokers.com/en/index.php?f=613" target="_blank" class="linkexternal">Relative</a> (a.k.a. Pegged-to-Primary) orders provide a means for traders to seek a more aggressive price than the National Best Bid and Offer (NBBO). By acting as liquidity providers, and placing more aggressive bids and offers than the current best bids and offers, traders increase their odds of filling their order. Quotes are automatically adjusted as the markets move, to remain aggressive. For a buy order, your bid is pegged to the NBB by a more aggressive offset, and if the NBB moves up, your bid will also move up. If the NBB moves down, there will be no adjustment because your bid will become even more aggressive and execute. For sales, your offer is pegged to the NBO by a more aggressive offset, and if the NBO moves down, your offer will also move down. If the NBO moves up, there will be no adjustment because your offer will become more aggressive and execute. In addition to the offset, you can define an absolute cap, which works like a limit price, and will prevent your order from being executed above or below a specified level. Stocks, Options and Futures - not available on paper trading </p>
<ul>
<li>
Products: CFD, STK, OPT, FUT </li>
<li>
<a href="https://www.interactivebrokers.com/en/index.php?f=3883?ot=rel" target="_blank" class="linkexternal">Supported exchanges</a> </li>
</ul>
<ul id="tab">
<li class="active">
<div class="fragment"><div class="line">            Order order = <span class="keyword">new</span> Order();</div>
<div class="line">            order.Action = action;</div>
<div class="line">            order.OrderType = <span class="stringliteral">&quot;REL&quot;</span>;</div>
<div class="line">            order.TotalQuantity = quantity;</div>
<div class="line">            order.LmtPrice = priceCap;</div>
<div class="line">            order.AuxPrice = offsetAmount;</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">        Order order = <span class="keyword">new</span> Order();</div>
<div class="line">        order.action(action);</div>
<div class="line">        order.orderType(<span class="stringliteral">&quot;REL&quot;</span>);</div>
<div class="line">        order.totalQuantity(quantity);</div>
<div class="line">        order.lmtPrice(priceCap);</div>
<div class="line">        order.auxPrice(offsetAmount);</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">            Dim order As Order = New Order</div>
<div class="line">            order.Action = action</div>
<div class="line">            order.OrderType = <span class="stringliteral">&quot;REL&quot;</span></div>
<div class="line">            order.TotalQuantity = quantity</div>
<div class="line">            order.LmtPrice = priceCap</div>
<div class="line">            order.AuxPrice = offsetAmount</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">    Order order;</div>
<div class="line">    order.action = action;</div>
<div class="line">    order.orderType = <span class="stringliteral">&quot;REL&quot;</span>;</div>
<div class="line">    order.totalQuantity = quantity;</div>
<div class="line">    order.lmtPrice = priceCap;</div>
<div class="line">    order.auxPrice = offsetAmount;</div>
</div><!-- fragment -->  </li>
</ul>
<h1><a class="anchor" id="sweep_to_fill"></a>
Sweep to Fill</h1>
<p><a href="https://www.interactivebrokers.com/en/index.php?f=607" target="_blank" class="linkexternal">Sweep-to-fill</a> orders are useful when a trader values speed of execution over price. A sweep-to-fill order identifies the best price and the exact quantity offered/available at that price, and transmits the corresponding portion of your order for immediate execution. Simultaneously it identifies the next best price and quantity offered/available, and submits the matching quantity of your order for immediate execution. </p>
<ul>
<li>
Products: CFD, STK, WAR (SMART only) </li>
</ul>
<ul id="tab">
<li class="active">
<div class="fragment"><div class="line">            Order order = <span class="keyword">new</span> Order();</div>
<div class="line">            order.Action = action;</div>
<div class="line">            order.OrderType = <span class="stringliteral">&quot;LMT&quot;</span>;</div>
<div class="line">            order.TotalQuantity = quantity;</div>
<div class="line">            order.LmtPrice = price;</div>
<div class="line">            order.SweepToFill = <span class="keyword">true</span>;</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">        Order order = <span class="keyword">new</span> Order();</div>
<div class="line">        order.action(action);</div>
<div class="line">        order.orderType(<span class="stringliteral">&quot;LMT&quot;</span>);</div>
<div class="line">        order.totalQuantity(quantity);</div>
<div class="line">        order.lmtPrice(price);</div>
<div class="line">        order.sweepToFill(<span class="keyword">true</span>);</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">            Dim order As Order = New Order</div>
<div class="line">            order.Action = action</div>
<div class="line">            order.OrderType = <span class="stringliteral">&quot;LMT&quot;</span></div>
<div class="line">            order.TotalQuantity = quantity</div>
<div class="line">            order.LmtPrice = price</div>
<div class="line">            order.SweepToFill = True</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">    Order order;</div>
<div class="line">    order.action = action;</div>
<div class="line">    order.orderType = <span class="stringliteral">&quot;LMT&quot;</span>;</div>
<div class="line">    order.totalQuantity = quantity;</div>
<div class="line">    order.lmtPrice = price;</div>
<div class="line">    order.sweepToFill = <span class="keyword">true</span>;</div>
</div><!-- fragment -->  </li>
</ul>
<h1><a class="anchor" id="auction_limit"></a>
Auction Limit</h1>
<p>For option orders routed to the Boston Options Exchange (BOX) you may elect to participate in the BOX's price improvement auction in pennies. All BOX-directed <a href="https://www.interactivebrokers.com/en/index.php?f=614" target="_blank" class="linkexternal">price improvement</a> orders are immediately sent from Interactive Brokers to the BOX order book, and when the terms allow, IB will evaluate it for inclusion in a price improvement auction based on price and volume priority. In the auction, your order will have priority over broker-dealer price improvement orders at the same price. An Auction Limit order at a specified price. Use of a limit order ensures that you will not receive an execution at a price less favorable than the limit price. Enter limit orders in penny increments with your auction improvement amount computed as the difference between your limit order price and the nearest listed increment. </p>
<ul>
<li>
Products: OPT (BOX only) </li>
</ul>
<ul id="tab">
<li class="active">
<div class="fragment"><div class="line">            Order order = <span class="keyword">new</span> Order();</div>
<div class="line">            order.Action = action;</div>
<div class="line">            order.OrderType = <span class="stringliteral">&quot;LMT&quot;</span>;</div>
<div class="line">            order.TotalQuantity = quantity;</div>
<div class="line">            order.LmtPrice = price;</div>
<div class="line">            order.AuctionStrategy = auctionStrategy;</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">        Order order = <span class="keyword">new</span> Order();</div>
<div class="line">        order.action(action);</div>
<div class="line">        order.orderType(<span class="stringliteral">&quot;LMT&quot;</span>);</div>
<div class="line">        order.totalQuantity(quantity);</div>
<div class="line">        order.lmtPrice(price);</div>
<div class="line">        order.auctionStrategy(auctionStrategy);</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">            Dim order As Order = New Order</div>
<div class="line">            order.Action = action</div>
<div class="line">            order.OrderType = <span class="stringliteral">&quot;LMT&quot;</span></div>
<div class="line">            order.TotalQuantity = quantity</div>
<div class="line">            order.LmtPrice = price</div>
<div class="line">            order.AuctionStrategy = auctionStrategy</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">    Order order;</div>
<div class="line">    order.action = action;</div>
<div class="line">    order.orderType = <span class="stringliteral">&quot;LMT&quot;</span>;</div>
<div class="line">    order.totalQuantity = quantity;</div>
<div class="line">    order.lmtPrice = price;</div>
<div class="line">    order.auctionStrategy = auctionStrategy;</div>
</div><!-- fragment -->  </li>
</ul>
<h1><a class="anchor" id="auction_pegged_stock"></a>
Auction Pegged to Stock</h1>
<p>For option orders routed to the Boston Options Exchange (BOX) you may elect to participate in the BOX's price improvement auction in pennies. All BOX-directed <a href="https://www.interactivebrokers.com/en/index.php?f=614" target="_blank" class="linkexternal">price improvement</a> orders are immediately sent from Interactive Brokers to the BOX order book, and when the terms allow, IB will evaluate it for inclusion in a price improvement auction based on price and volume priority. In the auction, your order will have priority over broker-dealer price improvement orders at the same price. An Auction Pegged to Stock order adjusts the order price by the product of a signed delta (which is entered as an absolute and assumed to be positive for calls, negative for puts) and the change of the option's underlying stock price. A buy or sell call order price is determined by adding the delta times a change in an underlying stock price change to a specified starting price for the call. To determine the change in price, a stock reference price (NBBO midpoint at the time of the order is assumed if no reference price is entered) is subtracted from the current NBBO midpoint. A stock range may also be entered that cancels an order when reached. The delta times the change in stock price will be rounded to the nearest penny in favor of the order and will be used as your auction improvement amount. </p>
<ul>
<li>
Products: OPT (BOX only) </li>
</ul>
<ul id="tab">
<li class="active">
<div class="fragment"><div class="line">            Order order = <span class="keyword">new</span> Order();</div>
<div class="line">            order.Action = action;</div>
<div class="line">            order.OrderType = <span class="stringliteral">&quot;PEG STK&quot;</span>;</div>
<div class="line">            order.TotalQuantity = quantity;</div>
<div class="line">            order.Delta = delta;</div>
<div class="line">            order.StartingPrice = startingPrice;</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">        Order order = <span class="keyword">new</span> Order();</div>
<div class="line">        order.action(action);</div>
<div class="line">        order.orderType(<span class="stringliteral">&quot;PEG STK&quot;</span>);</div>
<div class="line">        order.totalQuantity(quantity);</div>
<div class="line">        order.delta(delta);</div>
<div class="line">        order.startingPrice(startingPrice);</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">            Dim order As Order = New Order</div>
<div class="line">            order.Action = action</div>
<div class="line">            order.OrderType = <span class="stringliteral">&quot;PEG STK&quot;</span></div>
<div class="line">            order.TotalQuantity = quantity</div>
<div class="line">            order.Delta = delta</div>
<div class="line">            order.StartingPrice = startingPrice</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">    Order order;</div>
<div class="line">    order.action = action;</div>
<div class="line">    order.orderType = <span class="stringliteral">&quot;PEG STK&quot;</span>;</div>
<div class="line">    order.totalQuantity = quantity;</div>
<div class="line">    order.delta = delta;</div>
<div class="line">    order.startingPrice = startingPrice;</div>
</div><!-- fragment -->  </li>
</ul>
<h1><a class="anchor" id="auction_relative"></a>
Auction Relative</h1>
<p>For option orders routed to the Boston Options Exchange (BOX) you may elect to participate in the BOX's price improvement auction in pennies. All BOX-directed <a href="https://www.interactivebrokers.com/en/index.php?f=614" target="_blank" class="linkexternal">price improvement</a> orders are immediately sent from Interactive Brokers to the BOX order book, and when the terms allow, IB will evaluate it for inclusion in a price improvement auction based on price and volume priority. In the auction, your order will have priority over broker-dealer price improvement orders at the same price. An Auction Relative order that adjusts the order price by the product of a signed delta (which is entered as an absolute and assumed to be positive for calls, negative for puts) and the change of the option's underlying stock price. A buy or sell call order price is determined by adding the delta times a change in an underlying stock price change to a specified starting price for the call. To determine the change in price, a stock reference price (NBBO midpoint at the time of the order is assumed if no reference price is entered) is subtracted from the current NBBO midpoint. A stock range may also be entered that cancels an order when reached. The delta times the change in stock price will be rounded to the nearest penny in favor of the order and will be used as your auction improvement amount. </p>
<ul>
<li>
Products: OPT (BOX only) </li>
</ul>
<ul id="tab">
<li class="active">
<div class="fragment"><div class="line">            Order order = <span class="keyword">new</span> Order();</div>
<div class="line">            order.Action = action;</div>
<div class="line">            order.OrderType = <span class="stringliteral">&quot;REL&quot;</span>;</div>
<div class="line">            order.TotalQuantity = quantity;</div>
<div class="line">            order.AuxPrice = offset;</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">        Order order = <span class="keyword">new</span> Order();</div>
<div class="line">        order.action(action);</div>
<div class="line">        order.orderType(<span class="stringliteral">&quot;REL&quot;</span>);</div>
<div class="line">        order.totalQuantity(quantity);</div>
<div class="line">        order.auxPrice(offset);</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">            Dim order As Order = New Order</div>
<div class="line">            order.Action = action</div>
<div class="line">            order.OrderType = <span class="stringliteral">&quot;REL&quot;</span></div>
<div class="line">            order.TotalQuantity = quantity</div>
<div class="line">            order.AuxPrice = offset</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">    Order order;</div>
<div class="line">    order.action = action;</div>
<div class="line">    order.orderType = <span class="stringliteral">&quot;REL&quot;</span>;</div>
<div class="line">    order.totalQuantity = quantity;</div>
<div class="line">    order.auxPrice = offset;</div>
</div><!-- fragment -->  </li>
</ul>
<h1><a class="anchor" id="block"></a>
Block</h1>
<p>The <a href="https://www.interactivebrokers.com/en/index.php?f=580" target="_blank" class="linkexternal">Block</a> attribute is used for large volume option orders on ISE that consist of at least 50 contracts. To execute large-volume orders over time without moving the market, use the <a class="el" href="ibalgos.html#ad">Accumulate/Distribute</a> algorithm. </p>
<ul>
<li>
Products: OPT </li>
<li>
<a href="https://www.interactivebrokers.com/en/index.php?f=3883?ot=block" target="_blank" class="linkexternal">Supported exchanges</a> </li>
</ul>
<ul id="tab">
<li class="active">
<div class="fragment"><div class="line">            Order order = <span class="keyword">new</span> Order();</div>
<div class="line">            order.Action = action;</div>
<div class="line">            order.OrderType = <span class="stringliteral">&quot;LMT&quot;</span>;</div>
<div class="line">            order.TotalQuantity = quantity;<span class="comment">//Large volumes!</span></div>
<div class="line">            order.LmtPrice = price;</div>
<div class="line">            order.BlockOrder = <span class="keyword">true</span>;</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">        Order order = <span class="keyword">new</span> Order();</div>
<div class="line">        order.action(action);</div>
<div class="line">        order.orderType(<span class="stringliteral">&quot;LMT&quot;</span>);</div>
<div class="line">        order.totalQuantity(quantity);<span class="comment">//Large volumes!</span></div>
<div class="line">        order.lmtPrice(price);</div>
<div class="line">        order.blockOrder(<span class="keyword">true</span>);</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">            Dim order As Order = New Order</div>
<div class="line">            order.Action = action</div>
<div class="line">            order.OrderType = <span class="stringliteral">&quot;LMT&quot;</span></div>
<div class="line">            order.TotalQuantity = quantity <span class="stringliteral">&#39; Large volumes!</span></div>
<div class="line"><span class="stringliteral">            order.LmtPrice = price</span></div>
<div class="line"><span class="stringliteral">            order.BlockOrder = True</span></div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">    Order order;</div>
<div class="line">    order.action = action;</div>
<div class="line">    order.orderType = <span class="stringliteral">&quot;LMT&quot;</span>;</div>
<div class="line">    order.totalQuantity = quantity;</div>
<div class="line">    order.lmtPrice = price;</div>
<div class="line">    order.blockOrder = <span class="keyword">true</span>;</div>
</div><!-- fragment -->  </li>
</ul>
<h1><a class="anchor" id="boxtop"></a>
Box Top</h1>
<p>A <a href="https://www.interactivebrokers.com/en/index.php?f=582" target="_blank" class="linkexternal">Box Top</a> order executes as a market order at the current best price. If the order is only partially filled, the remainder is submitted as a limit order with the limit price equal to the price at which the filled portion of the order executed. </p>
<ul>
<li>
Products: OPT (BOX only) </li>
</ul>
<ul id="tab">
<li class="active">
<div class="fragment"><div class="line">            Order order = <span class="keyword">new</span> Order();</div>
<div class="line">            order.Action = action;</div>
<div class="line">            order.OrderType = <span class="stringliteral">&quot;BOX TOP&quot;</span>;</div>
<div class="line">            order.TotalQuantity = quantity;</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">        Order order = <span class="keyword">new</span> Order();</div>
<div class="line">        order.action(action);</div>
<div class="line">        order.orderType(<span class="stringliteral">&quot;BOX TOP&quot;</span>);</div>
<div class="line">        order.totalQuantity(quantity);</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">            Dim order As Order = New Order</div>
<div class="line">            order.Action = action</div>
<div class="line">            order.OrderType = <span class="stringliteral">&quot;BOX TOP&quot;</span></div>
<div class="line">            order.TotalQuantity = quantity</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">    Order order;</div>
<div class="line">    order.action = action;</div>
<div class="line">    order.orderType = <span class="stringliteral">&quot;BOX TOP&quot;</span>;</div>
<div class="line">    order.totalQuantity = quantity;</div>
</div><!-- fragment -->  </li>
</ul>
<h1><a class="anchor" id="limitorder"></a>
Limit Order</h1>
<p>A <a href="https://www.interactivebrokers.com/en/index.php?f=593" target="_blank" class="linkexternal">Limit order</a> is an order to buy or sell at a specified price or better. The Limit order ensures that if the order fills, it will not fill at a price less favorable than your limit price, but it does not guarantee a fill. </p>
<ul>
<li>
Products: BOND, CFD, CASH, FUT, FOP, OPT, STK, WAR </li>
<li>
<a href="https://www.interactivebrokers.com/en/index.php?f=3883?ot=lmt" target="_blank" class="linkexternal">Supported exchanges</a> </li>
</ul>
<ul id="tab">
<li class="active">
<div class="fragment"><div class="line">            Order order = <span class="keyword">new</span> Order();</div>
<div class="line">            order.Action = action;</div>
<div class="line">            order.OrderType = <span class="stringliteral">&quot;LMT&quot;</span>;</div>
<div class="line">            order.TotalQuantity = quantity;</div>
<div class="line">            order.LmtPrice = limitPrice;</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">        Order order = <span class="keyword">new</span> Order();</div>
<div class="line">        order.action(action);</div>
<div class="line">        order.orderType(<span class="stringliteral">&quot;LMT&quot;</span>);</div>
<div class="line">        order.totalQuantity(quantity);</div>
<div class="line">        order.lmtPrice(limitPrice);</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">            Dim order As Order = New Order</div>
<div class="line">            order.Action = action</div>
<div class="line">            order.OrderType = <span class="stringliteral">&quot;LMT&quot;</span></div>
<div class="line">            order.TotalQuantity = quantity</div>
<div class="line">            order.LmtPrice = limitPrice</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">    Order order;</div>
<div class="line">    order.action = action;</div>
<div class="line">    order.orderType = <span class="stringliteral">&quot;LMT&quot;</span>;</div>
<div class="line">    order.totalQuantity = quantity;</div>
<div class="line">    order.lmtPrice = limitPrice;</div>
</div><!-- fragment -->  </li>
</ul>
<h1><a class="anchor" id="limitiftouched"></a>
Limit if Touched</h1>
<p>A <a href="https://www.interactivebrokers.com/en/index.php?f=592" target="_blank" class="linkexternal">Limit if Touched</a> is an order to buy (or sell) a contract at a specified price or better, below (or above) the market. This order is held in the system until the trigger price is touched. An LIT order is similar to a stop limit order, except that an LIT sell order is placed above the current market price, and a stop limit sell order is placed below. </p>
<ul>
<li>
Products: BOND, CFD, CASH, FUT, FOP, OPT, STK, WAR </li>
<li>
<a href="https://www.interactivebrokers.com/en/index.php?f=3883?ot=lit" target="_blank" class="linkexternal">Supported exchanges</a> </li>
</ul>
<ul id="tab">
<li class="active">
<div class="fragment"><div class="line">            Order order = <span class="keyword">new</span> Order();</div>
<div class="line">            order.Action = action;</div>
<div class="line">            order.OrderType = <span class="stringliteral">&quot;LIT&quot;</span>;</div>
<div class="line">            order.TotalQuantity = quantity;</div>
<div class="line">            order.LmtPrice = limitPrice;</div>
<div class="line">            order.AuxPrice = triggerPrice;</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">        Order order = <span class="keyword">new</span> Order();</div>
<div class="line">        order.action(action);</div>
<div class="line">        order.orderType(<span class="stringliteral">&quot;LIT&quot;</span>);</div>
<div class="line">        order.totalQuantity(quantity);</div>
<div class="line">        order.lmtPrice(limitPrice);</div>
<div class="line">        order.auxPrice(triggerPrice);</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">            Dim order As Order = New Order</div>
<div class="line">            order.Action = action</div>
<div class="line">            order.OrderType = <span class="stringliteral">&quot;LIT&quot;</span></div>
<div class="line">            order.TotalQuantity = quantity</div>
<div class="line">            order.LmtPrice = limitPrice</div>
<div class="line">            order.AuxPrice = triggerPrice</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">    Order order;</div>
<div class="line">    order.action = action;</div>
<div class="line">    order.orderType = <span class="stringliteral">&quot;LIT&quot;</span>;</div>
<div class="line">    order.totalQuantity = quantity;</div>
<div class="line">    order.lmtPrice = limitPrice;</div>
<div class="line">    order.auxPrice = triggerPrice;</div>
</div><!-- fragment -->  </li>
</ul>
<h1><a class="anchor" id="limitonclose"></a>
Limit on Close</h1>
<p>A <a href="https://www.interactivebrokers.com/en/index.php?f=591" target="_blank" class="linkexternal">Limit-on-close</a> (LOC) order will be submitted at the close and will execute if the closing price is at or better than the submitted limit price. </p>
<ul>
<li>
Products: CFD, FUT, STK, WAR </li>
<li>
<a href="https://www.interactivebrokers.com/en/index.php?f=3883?ot=loc" target="_blank" class="linkexternal">Supported exchanges</a> </li>
</ul>
<ul id="tab">
<li class="active">
<div class="fragment"><div class="line">            Order order = <span class="keyword">new</span> Order();</div>
<div class="line">            order.Action = action;</div>
<div class="line">            order.OrderType = <span class="stringliteral">&quot;LOC&quot;</span>;</div>
<div class="line">            order.TotalQuantity = quantity;</div>
<div class="line">            order.LmtPrice = limitPrice;</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">        Order order = <span class="keyword">new</span> Order();</div>
<div class="line">        order.action(action);</div>
<div class="line">        order.orderType(<span class="stringliteral">&quot;LOC&quot;</span>);</div>
<div class="line">        order.totalQuantity(quantity);</div>
<div class="line">        order.lmtPrice(limitPrice);</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">            Dim order As Order = New Order</div>
<div class="line">            order.Action = action</div>
<div class="line">            order.OrderType = <span class="stringliteral">&quot;LOC&quot;</span></div>
<div class="line">            order.TotalQuantity = quantity</div>
<div class="line">            order.LmtPrice = limitPrice</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">    Order order;</div>
<div class="line">    order.action = action;</div>
<div class="line">    order.orderType = <span class="stringliteral">&quot;LOC&quot;</span>;</div>
<div class="line">    order.totalQuantity = quantity;</div>
<div class="line">    order.lmtPrice = limitPrice;</div>
</div><!-- fragment -->  </li>
</ul>
<h1><a class="anchor" id="limitonopen"></a>
Limit on Open</h1>
<p>A <a href="https://www.interactivebrokers.com/en/index.php?f=590" target="_blank" class="linkexternal">Limit-on-Open</a> (LOO) order combines a limit order with the OPG time in force to create an order that is submitted at the market's open, and that will only execute at the specified limit price or better. Orders are filled in accordance with specific exchange rules. </p>
<ul>
<li>
Products: CFD, STK, OPT, WAR </li>
<li>
<a href="https://www.interactivebrokers.com/en/index.php?f=3883?ot=moo" target="_blank" class="linkexternal">Supported exchanges</a> </li>
</ul>
<ul id="tab">
<li class="active">
<div class="fragment"><div class="line">            Order order = <span class="keyword">new</span> Order();</div>
<div class="line">            order.Action = action;</div>
<div class="line">            order.Tif = <span class="stringliteral">&quot;OPG&quot;</span>;</div>
<div class="line">            order.OrderType = <span class="stringliteral">&quot;LMT&quot;</span>;</div>
<div class="line">            order.TotalQuantity = quantity;</div>
<div class="line">            order.LmtPrice = limitPrice;</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">        Order order = <span class="keyword">new</span> Order();</div>
<div class="line">        order.action(action);</div>
<div class="line">        order.tif(<span class="stringliteral">&quot;OPG&quot;</span>);</div>
<div class="line">        order.orderType(<span class="stringliteral">&quot;LOC&quot;</span>);</div>
<div class="line">        order.totalQuantity(quantity);</div>
<div class="line">        order.lmtPrice(limitPrice);</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">            Dim order As Order = New Order</div>
<div class="line">            order.Action = action</div>
<div class="line">            order.Tif = <span class="stringliteral">&quot;OPG&quot;</span></div>
<div class="line">            order.OrderType = <span class="stringliteral">&quot;LMT&quot;</span></div>
<div class="line">            order.TotalQuantity = quantity</div>
<div class="line">            order.LmtPrice = limitPrice</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">    Order order;</div>
<div class="line">    order.action = action;</div>
<div class="line">    order.orderType = <span class="stringliteral">&quot;LMT&quot;</span>;</div>
<div class="line">    order.tif = <span class="stringliteral">&quot;OPG&quot;</span>;</div>
<div class="line">    order.totalQuantity = quantity;</div>
<div class="line">    order.lmtPrice = limitPrice;</div>
</div><!-- fragment -->  </li>
</ul>
<h1><a class="anchor" id="passive_relative"></a>
Passive Relative</h1>
<p><a href="https://www.interactivebrokers.com/en/index.php?f=3124" target="_blank" class="linkexternal">Passive Relative</a> orders provide a means for traders to seek a less aggressive price than the National Best Bid and Offer (NBBO) while keeping the order pegged to the best bid (for a buy) or ask (for a sell). The order price is automatically adjusted as the markets move to keep the order less aggressive. For a buy order, your order price is pegged to the NBB by a less aggressive offset, and if the NBB moves up, your bid will also move up. If the NBB moves down, there will be no adjustment because your bid will become aggressive and execute. For a sell order, your price is pegged to the NBO by a less aggressive offset, and if the NBO moves down, your offer will also move down. If the NBO moves up, there will be no adjustment because your offer will become aggressive and execute. In addition to the offset, you can define an absolute cap, which works like a limit price, and will prevent your order from being executed above or below a specified level. The Passive Relative order is similar to the Relative/Pegged-to-Primary order, except that the Passive relative subtracts the offset from the bid and the Relative adds the offset to the bid. </p>
<ul>
<li>
Products: STK, WAR </li>
<li>
<a href="https://www.interactivebrokers.com/en/index.php?f=3883?ot=passvrel" target="_blank" class="linkexternal">Supported exchanges</a> </li>
</ul>
<ul id="tab">
<li class="active">
<div class="fragment"><div class="line">            Order order = <span class="keyword">new</span> Order();</div>
<div class="line">            order.Action = action;</div>
<div class="line">            order.OrderType = <span class="stringliteral">&quot;PASSV REL&quot;</span>;</div>
<div class="line">            order.TotalQuantity = quantity;</div>
<div class="line">            order.AuxPrice = offset;</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">        Order order = <span class="keyword">new</span> Order();</div>
<div class="line">        order.action(action);</div>
<div class="line">        order.orderType(<span class="stringliteral">&quot;PASSV REL&quot;</span>);</div>
<div class="line">        order.totalQuantity(quantity);</div>
<div class="line">        order.auxPrice(offset);</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">            Dim order As Order = New Order</div>
<div class="line">            order.Action = action</div>
<div class="line">            order.OrderType = <span class="stringliteral">&quot;PASSV REL&quot;</span></div>
<div class="line">            order.TotalQuantity = quantity</div>
<div class="line">            order.AuxPrice = offset</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">    Order order;</div>
<div class="line">    order.action = action;</div>
<div class="line">    order.orderType = <span class="stringliteral">&quot;PASSV REL&quot;</span>;</div>
<div class="line">    order.totalQuantity = quantity;</div>
<div class="line">    order.auxPrice = offset;</div>
</div><!-- fragment -->  </li>
</ul>
<h1><a class="anchor" id="pegged_midpoint"></a>
Pegged to Midpoint</h1>
<p>A <a href="https://www.interactivebrokers.com/en/index.php?f=1058" target="_blank" class="linkexternal">pegged-to-midpoint</a> order provides a means for traders to seek a price at the midpoint of the National Best Bid and Offer (NBBO). The price automatically adjusts to peg the midpoint as the markets move, to remain aggressive. For a buy order, your bid is pegged to the NBBO midpoint and the order price adjusts automatically to continue to peg the midpoint if the market moves. The price only adjusts to be more aggressive. If the market moves in the opposite direction, the order will execute. </p>
<ul>
<li>
Products: STK </li>
<li>
<a href="https://www.interactivebrokers.com/en/index.php?f=3883?ot=pegmid" target="_blank" class="linkexternal">Supported exchanges</a> </li>
</ul>
<ul id="tab">
<li class="active">
<div class="fragment"><div class="line">            Order order = <span class="keyword">new</span> Order();</div>
<div class="line">            order.Action = action;</div>
<div class="line">            order.OrderType = <span class="stringliteral">&quot;PEG MID&quot;</span>;</div>
<div class="line">            order.TotalQuantity = quantity;</div>
<div class="line">            order.AuxPrice = offset;</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">        Order order = <span class="keyword">new</span> Order();</div>
<div class="line">        order.action(action);</div>
<div class="line">        order.orderType(<span class="stringliteral">&quot;PEG MID&quot;</span>);</div>
<div class="line">        order.totalQuantity(quantity);</div>
<div class="line">        order.auxPrice(offset);</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">            Dim order As Order = New Order</div>
<div class="line">            order.Action = action</div>
<div class="line">            order.OrderType = <span class="stringliteral">&quot;PEG MID&quot;</span></div>
<div class="line">            order.TotalQuantity = quantity</div>
<div class="line">            order.AuxPrice = offset</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">    Order order;</div>
<div class="line">    order.action = action;</div>
<div class="line">    order.orderType = <span class="stringliteral">&quot;PEG MID&quot;</span>;</div>
<div class="line">    order.totalQuantity = quantity;</div>
<div class="line">    order.auxPrice = offset;</div>
</div><!-- fragment -->  </li>
</ul>
<h1><a class="anchor" id="markettolimit"></a>
Market to Limit</h1>
<p>A <a href="https://www.interactivebrokers.com/en/index.php?f=597" target="_blank" class="linkexternal">Market-to-Limit</a> (MTL) order is submitted as a market order to execute at the current best market price. If the order is only partially filled, the remainder of the order is canceled and re-submitted as a limit order with the limit price equal to the price at which the filled portion of the order executed. </p>
<ul>
<li>
Products: CFD, FUT, FOP, OPT, STK, WAR </li>
<li>
<a href="https://www.interactivebrokers.com/en/index.php?f=3883?ot=mtl" target="_blank" class="linkexternal">Supported exchanges</a> </li>
</ul>
<ul id="tab">
<li class="active">
<div class="fragment"><div class="line">            Order order = <span class="keyword">new</span> Order();</div>
<div class="line">            order.Action = action;</div>
<div class="line">            order.OrderType = <span class="stringliteral">&quot;MTL&quot;</span>;</div>
<div class="line">            order.TotalQuantity = quantity;</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">        Order order = <span class="keyword">new</span> Order();</div>
<div class="line">        order.action(action);</div>
<div class="line">        order.orderType(<span class="stringliteral">&quot;MTL&quot;</span>);</div>
<div class="line">        order.totalQuantity(quantity);</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">            Dim order As Order = New Order</div>
<div class="line">            order.Action = action</div>
<div class="line">            order.OrderType = <span class="stringliteral">&quot;MTL&quot;</span></div>
<div class="line">            order.TotalQuantity = quantity</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">    Order order;</div>
<div class="line">    order.action = action;</div>
<div class="line">    order.orderType = <span class="stringliteral">&quot;MTL&quot;</span>;</div>
<div class="line">    order.totalQuantity = quantity;</div>
</div><!-- fragment -->  </li>
</ul>
<h1><a class="anchor" id="marketwithprotection"></a>
Market with Protection</h1>
<p>This order type is useful for futures traders using Globex. A <a href="https://www.interactivebrokers.com/en/index.php?f=601" target="_blank" class="linkexternal">Market with Protection</a> order is a market order that will be cancelled and resubmitted as a limit order if the entire order does not immediately execute at the market price. The limit price is set by Globex to be close to the current market price, slightly higher for a sell order and lower for a buy order. </p>
<ul>
<li>
Products: FUT, FOP </li>
<li>
<a href="https://www.interactivebrokers.com/en/index.php?f=3883?ot=mktprot" target="_blank" class="linkexternal">Supported exchanges</a> </li>
</ul>
<ul id="tab">
<li class="active">
<div class="fragment"><div class="line">            Order order = <span class="keyword">new</span> Order();</div>
<div class="line">            order.Action = action;</div>
<div class="line">            order.OrderType = <span class="stringliteral">&quot;MKT PRT&quot;</span>;</div>
<div class="line">            order.TotalQuantity = quantity;</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">        Order order = <span class="keyword">new</span> Order();</div>
<div class="line">        order.action(action);</div>
<div class="line">        order.orderType(<span class="stringliteral">&quot;MKT PRT&quot;</span>);</div>
<div class="line">        order.totalQuantity(quantity);</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">            Dim order As Order = New Order</div>
<div class="line">            order.Action = action</div>
<div class="line">            order.OrderType = <span class="stringliteral">&quot;MKT PRT&quot;</span></div>
<div class="line">            order.TotalQuantity = quantity</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">    Order order;</div>
<div class="line">    order.action = action;</div>
<div class="line">    order.orderType = <span class="stringliteral">&quot;MKT PRT&quot;</span>;</div>
<div class="line">    order.totalQuantity = quantity;</div>
</div><!-- fragment -->  </li>
</ul>
<h1><a class="anchor" id="stop"></a>
Stop</h1>
<p>A <a href="https://www.interactivebrokers.com/en/index.php?f=609" target="_blank" class="linkexternal">Stop</a> order is an instruction to submit a buy or sell market order if and when the user-specified stop trigger price is attained or penetrated. A Stop order is not guaranteed a specific execution price and may execute significantly away from its stop price. A Sell Stop order is always placed below the current market price and is typically used to limit a loss or protect a profit on a long stock position. A Buy Stop order is always placed above the current market price. It is typically used to limit a loss or help protect a profit on a short sale. </p>
<ul>
<li>
Products: CFD, BAG, CASH, FUT, FOP, OPT, STK, WAR </li>
<li>
<a href="https://www.interactivebrokers.com/en/index.php?f=3883?ot=stp" target="_blank" class="linkexternal">Supported exchanges</a> </li>
</ul>
<ul id="tab">
<li class="active">
<div class="fragment"><div class="line">            Order order = <span class="keyword">new</span> Order();</div>
<div class="line">            order.Action = action;</div>
<div class="line">            order.OrderType = <span class="stringliteral">&quot;STP&quot;</span>;</div>
<div class="line">            order.AuxPrice = stopPrice;</div>
<div class="line">            order.TotalQuantity = quantity;</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">        Order order = <span class="keyword">new</span> Order();</div>
<div class="line">        order.action(action);</div>
<div class="line">        order.orderType(<span class="stringliteral">&quot;STP&quot;</span>);</div>
<div class="line">        order.auxPrice(stopPrice);</div>
<div class="line">        order.totalQuantity(quantity);</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">            Dim order As Order = New Order</div>
<div class="line">            order.Action = action</div>
<div class="line">            order.OrderType = <span class="stringliteral">&quot;STP&quot;</span></div>
<div class="line">            order.AuxPrice = stopPrice</div>
<div class="line">            order.TotalQuantity = quantity</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">    Order order;</div>
<div class="line">    order.action = action;</div>
<div class="line">    order.orderType = <span class="stringliteral">&quot;STP&quot;</span>;</div>
<div class="line">    order.totalQuantity = quantity;</div>
<div class="line">    order.auxPrice = stopPrice;</div>
</div><!-- fragment -->  </li>
</ul>
<h1><a class="anchor" id="stoplimit"></a>
Stop Limit</h1>
<p>A <a href="https://www.interactivebrokers.com/en/index.php?f=608" target="_blank" class="linkexternal">Stop-Limit</a> order is an instruction to submit a buy or sell limit order when the user-specified stop trigger price is attained or penetrated. The order has two basic components: the stop price and the limit price. When a trade has occurred at or through the stop price, the order becomes executable and enters the market as a limit order, which is an order to buy or sell at a specified price or better. </p>
<ul>
<li>
Products: CFD, CASH, FUT, FOP, OPT, STK, WAR </li>
<li>
<a href="https://individuals.interactivebrokers.com/en/trading/orderTypeExchanges.php?ot=stplmt" target="_blank" class="linkexternal">Supported exchanges</a> </li>
</ul>
<ul id="tab">
<li class="active">
<div class="fragment"><div class="line">            Order order = <span class="keyword">new</span> Order();</div>
<div class="line">            order.Action = action;</div>
<div class="line">            order.OrderType = <span class="stringliteral">&quot;STP LMT&quot;</span>;</div>
<div class="line">            order.TotalQuantity = quantity;</div>
<div class="line">            order.LmtPrice = limitPrice;</div>
<div class="line">            order.AuxPrice = stopPrice;</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">        Order order = <span class="keyword">new</span> Order();</div>
<div class="line">        order.action(action);</div>
<div class="line">        order.orderType(<span class="stringliteral">&quot;STP LMT&quot;</span>);</div>
<div class="line">        order.lmtPrice(limitPrice);</div>
<div class="line">        order.auxPrice(stopPrice);</div>
<div class="line">        order.totalQuantity(quantity);</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">            Dim order As Order = New Order</div>
<div class="line">            order.Action = action</div>
<div class="line">            order.OrderType = <span class="stringliteral">&quot;STP LMT&quot;</span></div>
<div class="line">            order.TotalQuantity = quantity</div>
<div class="line">            order.LmtPrice = limitPrice</div>
<div class="line">            order.AuxPrice = stopPrice</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">    Order order;</div>
<div class="line">    order.action = action;</div>
<div class="line">    order.orderType = <span class="stringliteral">&quot;STP LMT&quot;</span>;</div>
<div class="line">    order.totalQuantity = quantity;</div>
<div class="line">    order.lmtPrice = limitPrice;</div>
<div class="line">    order.auxPrice = stopPrice;</div>
</div><!-- fragment -->  </li>
</ul>
<h1><a class="anchor" id="stopwithprotection"></a>
Stop with Protection</h1>
<p>A <a href="https://www.interactivebrokers.com/en/index.php?f=3077" target="_blank" class="linkexternal">Stop with Protection</a> order combines the functionality of a stop limit order with a market with protection order. The order is set to trigger at a specified stop price. When the stop price is penetrated, the order is triggered as a market with protection order, which means that it will fill within a specified protected price range equal to the trigger price +/- the exchange-defined protection point range. Any portion of the order that does not fill within this protected range is submitted as a limit order at the exchange-defined trigger price +/- the protection points. </p>
<ul>
<li>
Products: FUT </li>
<li>
<a href="https://individuals.interactivebrokers.com/en/trading/orderTypeExchanges.php?ot=stpprot" target="_blank" class="linkexternal">Supported exchanges</a> </li>
</ul>
<ul id="tab">
<li class="active">
<div class="fragment"><div class="line">            Order order = <span class="keyword">new</span> Order();</div>
<div class="line">            order.TotalQuantity = quantity;</div>
<div class="line">            order.Action = action;</div>
<div class="line">            order.OrderType = <span class="stringliteral">&quot;STP PRT&quot;</span>;</div>
<div class="line">            order.AuxPrice = stopPrice;</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">        Order order = <span class="keyword">new</span> Order();</div>
<div class="line">        order.action(action);</div>
<div class="line">        order.orderType(<span class="stringliteral">&quot;STP PRT&quot;</span>);</div>
<div class="line">        order.auxPrice(stopPrice);</div>
<div class="line">        order.totalQuantity(quantity);</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">            Dim order As Order = New Order</div>
<div class="line">            order.TotalQuantity = quantity</div>
<div class="line">            order.Action = action</div>
<div class="line">            order.OrderType = <span class="stringliteral">&quot;STP PRT&quot;</span></div>
<div class="line">            order.AuxPrice = stopPrice</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">    Order order;</div>
<div class="line">    order.action = action;</div>
<div class="line">    order.orderType = <span class="stringliteral">&quot;STP PRT&quot;</span>;</div>
<div class="line">    order.totalQuantity = quantity;</div>
<div class="line">    order.auxPrice = stopPrice;</div>
</div><!-- fragment -->  </li>
</ul>
<h1><a class="anchor" id="trailingstop"></a>
Trailing Stop</h1>
<p>A sell <a href="https://www.interactivebrokers.com/en/index.php?f=605" target="_blank" class="linkexternal">trailing stop</a> order sets the stop price at a fixed amount below the market price with an attached "trailing" amount. As the market price rises, the stop price rises by the trail amount, but if the stock price falls, the stop loss price doesn't change, and a market order is submitted when the stop price is hit. This technique is designed to allow an investor to specify a limit on the maximum possible loss, without setting a limit on the maximum possible gain. "Buy" trailing stop orders are the mirror image of sell trailing stop orders, and are most appropriate for use in falling markets. </p>
<ul>
<li>
Products: CFD, CASH, FOP, FUT, OPT, STK, WAR </li>
<li>
<a href="https://individuals.interactivebrokers.com/en/trading/orderTypeExchanges.php?ot=trail" target="_blank" class="linkexternal">Supported exchanges</a> </li>
</ul>
<ul id="tab">
<li class="active">
<div class="fragment"><div class="line">            Order order = <span class="keyword">new</span> Order();</div>
<div class="line">            order.Action = action;</div>
<div class="line">            order.OrderType = <span class="stringliteral">&quot;TRAIL&quot;</span>;</div>
<div class="line">            order.TotalQuantity = quantity;</div>
<div class="line">            order.TrailingPercent = trailingPercent;</div>
<div class="line">            order.TrailStopPrice = trailStopPrice;</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">        Order order = <span class="keyword">new</span> Order();</div>
<div class="line">        order.action(action);</div>
<div class="line">        order.orderType(<span class="stringliteral">&quot;TRAIL&quot;</span>);</div>
<div class="line">        order.trailingPercent(trailingPercent);</div>
<div class="line">        order.trailStopPrice(trailStopPrice);</div>
<div class="line">        order.totalQuantity(quantity);</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">            Dim order As Order = New Order</div>
<div class="line">            order.Action = action</div>
<div class="line">            order.OrderType = <span class="stringliteral">&quot;TRAIL&quot;</span></div>
<div class="line">            order.TotalQuantity = quantity</div>
<div class="line">            order.TrailingPercent = trailingPercent</div>
<div class="line">            order.TrailStopPrice = trailStopPrice</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">    Order order;</div>
<div class="line">    order.action = action;</div>
<div class="line">    order.orderType = <span class="stringliteral">&quot;TRAIL&quot;</span>;</div>
<div class="line">    order.totalQuantity = quantity;</div>
<div class="line">    order.trailingPercent = trailingPercent;</div>
<div class="line">    order.trailStopPrice = trailStopPrice;</div>
</div><!-- fragment -->  </li>
</ul>
<h1><a class="anchor" id="trailingstoplimit"></a>
Trailing Stop Limit</h1>
<p>A <a href="https://www.interactivebrokers.com/en/index.php?f=606" target="_blank" class="linkexternal">trailing stop limit</a> order is designed to allow an investor to specify a limit on the maximum possible loss, without setting a limit on the maximum possible gain. A SELL trailing stop limit moves with the market price, and continually recalculates the stop trigger price at a fixed amount below the market price, based on the user-defined "trailing" amount. The limit order price is also continually recalculated based on the limit offset. As the market price rises, both the stop price and the limit price rise by the trail amount and limit offset respectively, but if the stock price falls, the stop price remains unchanged, and when the stop price is hit a limit order is submitted at the last calculated limit price. A "Buy" trailing stop limit order is the mirror image of a sell trailing stop limit, and is generally used in falling markets. </p>
<ul>
<li>
Products: BOND, CFD, CASH, FUT, FOP, OPT, STK, WAR </li>
<li>
<a href="" target="_blank" class="linkexternal">Supported exchanges</a> </li>
</ul>
<ul id="tab">
<li class="active">
<div class="fragment"><div class="line">            Order order = <span class="keyword">new</span> Order();</div>
<div class="line">            order.Action = action;</div>
<div class="line">            order.OrderType = <span class="stringliteral">&quot;TRAIL LIMIT&quot;</span>;</div>
<div class="line">            order.TotalQuantity = quantity;</div>
<div class="line">            order.TrailStopPrice = trailStopPrice;</div>
<div class="line">            order.LmtPrice = limitPrice;</div>
<div class="line">            order.AuxPrice = trailingAmount;</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">        Order order = <span class="keyword">new</span> Order();</div>
<div class="line">        order.action(action);</div>
<div class="line">        order.orderType(<span class="stringliteral">&quot;TRAIL LIMIT&quot;</span>);</div>
<div class="line">        order.lmtPrice(limitPrice);</div>
<div class="line">        order.auxPrice(trailingAmount);</div>
<div class="line">        order.trailStopPrice(trailStopPrice);</div>
<div class="line">        order.totalQuantity(quantity);</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">            Dim order As Order = New Order</div>
<div class="line">            order.Action = action</div>
<div class="line">            order.OrderType = <span class="stringliteral">&quot;TRAIL LIMIT&quot;</span></div>
<div class="line">            order.TotalQuantity = quantity</div>
<div class="line">            order.TrailStopPrice = trailStopPrice</div>
<div class="line">            order.LmtPrice = limitPrice</div>
<div class="line">            order.AuxPrice = trailingAmount</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">    Order order;</div>
<div class="line">    order.action = action;</div>
<div class="line">    order.orderType = <span class="stringliteral">&quot;TRAIL LIMIT&quot;</span>;</div>
<div class="line">    order.totalQuantity = quantity;</div>
<div class="line">    order.trailStopPrice = trailStopPrice;</div>
<div class="line">    order.lmtPrice = limitPrice;</div>
<div class="line">    order.auxPrice = trailingAmount;</div>
</div><!-- fragment -->  </li>
</ul>
<h1><a class="anchor" id="combolimit"></a>
Combo Limit</h1>
<p>Create combination orders that include options, stock and futures legs (stock legs can be included if the order is routed through SmartRouting). Although a combination/spread order is constructed of separate legs, it is executed as a single transaction if it is routed directly to an exchange. For combination orders that are SmartRouted, each leg may be executed separately to ensure best execution. </p>
<ul>
<li>
Products: OPT, STK, FUT </li>
</ul>
<ul id="tab">
<li class="active">
<div class="fragment"><div class="line">            Order order = <span class="keyword">new</span> Order();</div>
<div class="line">            order.Action = action;</div>
<div class="line">            order.OrderType = <span class="stringliteral">&quot;LMT&quot;</span>;</div>
<div class="line">            order.TotalQuantity = quantity;</div>
<div class="line">            order.LmtPrice = limitPrice;</div>
<div class="line">            <span class="keywordflow">if</span> (nonGuaranteed)</div>
<div class="line">            {</div>
<div class="line">                order.SmartComboRoutingParams = <span class="keyword">new</span> List&lt;TagValue&gt;();</div>
<div class="line">                order.SmartComboRoutingParams.Add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;NonGuaranteed&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>));</div>
<div class="line">            }</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">        Order order = <span class="keyword">new</span> Order();</div>
<div class="line">        order.action(action);</div>
<div class="line">        order.orderType(<span class="stringliteral">&quot;LMT&quot;</span>);</div>
<div class="line">        order.lmtPrice(limitPrice);</div>
<div class="line">        order.totalQuantity(quantity);</div>
<div class="line">        <span class="keywordflow">if</span> (nonGuaranteed)</div>
<div class="line">        {</div>
<div class="line">            List&lt;TagValue&gt; smartComboRoutingParams = <span class="keyword">new</span> ArrayList&lt;TagValue&gt;();</div>
<div class="line">            smartComboRoutingParams.add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;NonGuaranteed&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>));</div>
<div class="line">        }</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">            Dim order As Order = New Order</div>
<div class="line">            order.Action = action</div>
<div class="line">            order.OrderType = <span class="stringliteral">&quot;LMT&quot;</span></div>
<div class="line">            order.TotalQuantity = quantity</div>
<div class="line">            order.LmtPrice = limitPrice</div>
<div class="line">            If (nonGuaranteed) Then</div>
<div class="line">                order.SmartComboRoutingParams = New List(Of TagValue)</div>
<div class="line">                order.SmartComboRoutingParams.Add(New TagValue(&quot;NonGuaranteed&quot;, &quot;1&quot;))</div>
<div class="line">            End If</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">    Order order;</div>
<div class="line">    order.action = action;</div>
<div class="line">    order.orderType = <span class="stringliteral">&quot;LMT&quot;</span>;</div>
<div class="line">    order.totalQuantity = quantity;</div>
<div class="line">    order.lmtPrice = limitPrice;</div>
<div class="line">    <span class="keywordflow">if</span>(nonGuaranteed = <span class="keyword">true</span>){</div>
<div class="line">        TagValueSPtr tag1(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;NonGuaranteed&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>));</div>
<div class="line">        order.smartComboRoutingParams.reset(<span class="keyword">new</span> TagValueList());</div>
<div class="line">        order.smartComboRoutingParams-&gt;push_back(tag1);</div>
<div class="line">    }</div>
</div><!-- fragment -->  </li>
</ul>
<h1><a class="anchor" id="combomarket"></a>
Combo Market</h1>
<p>Create combination orders that include options, stock and futures legs (stock legs can be included if the order is routed through SmartRouting). Although a combination/spread order is constructed of separate legs, it is executed as a single transaction if it is routed directly to an exchange. For combination orders that are SmartRouted, each leg may be executed separately to ensure best execution. </p>
<ul>
<li>
Products: OPT, STK, FUT </li>
</ul>
<ul id="tab">
<li class="active">
<div class="fragment"><div class="line">            Order order = <span class="keyword">new</span> Order();</div>
<div class="line">            order.Action = action;</div>
<div class="line">            order.OrderType = <span class="stringliteral">&quot;MKT&quot;</span>;</div>
<div class="line">            order.TotalQuantity = quantity;</div>
<div class="line">            <span class="keywordflow">if</span> (nonGuaranteed)</div>
<div class="line">            {</div>
<div class="line">                order.SmartComboRoutingParams = <span class="keyword">new</span> List&lt;TagValue&gt;();</div>
<div class="line">                order.SmartComboRoutingParams.Add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;NonGuaranteed&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>));</div>
<div class="line">            }</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">        Order order = <span class="keyword">new</span> Order();</div>
<div class="line">        order.action(action);</div>
<div class="line">        order.orderType(<span class="stringliteral">&quot;MKT&quot;</span>);</div>
<div class="line">        order.totalQuantity(quantity);</div>
<div class="line">        <span class="keywordflow">if</span> (nonGuaranteed)</div>
<div class="line">        {</div>
<div class="line">            List&lt;TagValue&gt; smartComboRoutingParams = <span class="keyword">new</span> ArrayList&lt;TagValue&gt;();</div>
<div class="line">            smartComboRoutingParams.add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;NonGuaranteed&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>));</div>
<div class="line">        }</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">            Dim order As Order = New Order</div>
<div class="line">            order.Action = action</div>
<div class="line">            order.OrderType = <span class="stringliteral">&quot;MKT&quot;</span></div>
<div class="line">            order.TotalQuantity = quantity</div>
<div class="line">            If (nonGuaranteed) Then</div>
<div class="line"></div>
<div class="line">                order.SmartComboRoutingParams = New List(Of TagValue)</div>
<div class="line">                order.SmartComboRoutingParams.Add(New TagValue(&quot;NonGuaranteed&quot;, &quot;1&quot;))</div>
<div class="line">            End If</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">    Order order;</div>
<div class="line">    order.action = action;</div>
<div class="line">    order.orderType = <span class="stringliteral">&quot;MKT&quot;</span>;</div>
<div class="line">    order.totalQuantity = quantity;</div>
<div class="line">    <span class="keywordflow">if</span>(nonGuaranteed = <span class="keyword">true</span>){</div>
<div class="line">        TagValueSPtr tag1(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;NonGuaranteed&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>));</div>
<div class="line">        order.smartComboRoutingParams.reset(<span class="keyword">new</span> TagValueList());</div>
<div class="line">        order.smartComboRoutingParams-&gt;push_back(tag1);</div>
<div class="line">    }</div>
</div><!-- fragment -->  </li>
</ul>
<h1><a class="anchor" id="limitordercombolegprices"></a>
Combo Limit with Price per Leg</h1>
<p>Create combination orders that include options, stock and futures legs (stock legs can be included if the order is routed through SmartRouting). Although a combination/spread order is constructed of separate legs, it is executed as a single transaction if it is routed directly to an exchange. For combination orders that are SmartRouted, each leg may be executed separately to ensure best execution. </p>
<ul>
<li>
Products: OPT, STK, FUT </li>
</ul>
<ul id="tab">
<li class="active">
<div class="fragment"><div class="line">            Order order = <span class="keyword">new</span> Order();</div>
<div class="line">            order.Action = action;</div>
<div class="line">            order.OrderType = <span class="stringliteral">&quot;LMT&quot;</span>;</div>
<div class="line">            order.TotalQuantity = quantity;</div>
<div class="line">            order.OrderComboLegs = <span class="keyword">new</span> List&lt;OrderComboLeg&gt;();</div>
<div class="line">            <span class="keywordflow">foreach</span>(<span class="keywordtype">double</span> price <span class="keywordflow">in</span> legPrices)</div>
<div class="line">            {</div>
<div class="line">                OrderComboLeg comboLeg = <span class="keyword">new</span> OrderComboLeg();</div>
<div class="line">                comboLeg.Price = 5.0;</div>
<div class="line">                order.OrderComboLegs.Add(comboLeg);</div>
<div class="line">            }           </div>
<div class="line">            <span class="keywordflow">if</span> (nonGuaranteed)</div>
<div class="line">            {</div>
<div class="line">                order.SmartComboRoutingParams = <span class="keyword">new</span> List&lt;TagValue&gt;();</div>
<div class="line">                order.SmartComboRoutingParams.Add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;NonGuaranteed&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>));</div>
<div class="line">            }</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">        Order order = <span class="keyword">new</span> Order();</div>
<div class="line">        order.action(action);</div>
<div class="line">        order.orderType(<span class="stringliteral">&quot;LMT&quot;</span>);</div>
<div class="line">        order.totalQuantity(quantity);</div>
<div class="line">        order.orderComboLegs(<span class="keyword">new</span> ArrayList&lt;OrderComboLeg&gt;());</div>
<div class="line">        </div>
<div class="line">        <span class="keywordflow">for</span>(<span class="keywordtype">double</span> price : legPrices) {</div>
<div class="line">            OrderComboLeg comboLeg = <span class="keyword">new</span> OrderComboLeg();</div>
<div class="line">            comboLeg.price(5.0);</div>
<div class="line">            order.orderComboLegs().add(comboLeg);</div>
<div class="line">        }</div>
<div class="line">        </div>
<div class="line">        <span class="keywordflow">if</span> (nonGuaranteed)</div>
<div class="line">        {</div>
<div class="line">            List&lt;TagValue&gt; smartComboRoutingParams = <span class="keyword">new</span> ArrayList&lt;TagValue&gt;();</div>
<div class="line">            smartComboRoutingParams.add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;NonGuaranteed&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>));</div>
<div class="line">        }</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">            Dim order As Order = New Order</div>
<div class="line">            order.Action = action</div>
<div class="line">            order.OrderType = <span class="stringliteral">&quot;LMT&quot;</span></div>
<div class="line">            order.TotalQuantity = quantity</div>
<div class="line">            order.OrderComboLegs = New List(Of OrderComboLeg)</div>
<div class="line">            For Each price As Double In legPrices</div>
<div class="line">                Dim ComboLeg As OrderComboLeg = New OrderComboLeg</div>
<div class="line">                ComboLeg.Price = 5.0</div>
<div class="line">                order.OrderComboLegs.Add(ComboLeg)</div>
<div class="line">            Next price</div>
<div class="line"></div>
<div class="line">            If (nonGuaranteed) Then</div>
<div class="line">                order.SmartComboRoutingParams = New List(Of TagValue)</div>
<div class="line">                order.SmartComboRoutingParams.Add(New TagValue(&quot;NonGuaranteed&quot;, &quot;1&quot;))</div>
<div class="line">            End If</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">    Order order;</div>
<div class="line">    order.action = action;</div>
<div class="line">    order.orderType = <span class="stringliteral">&quot;LMT&quot;</span>;</div>
<div class="line">    order.totalQuantity = quantity;</div>
<div class="line">    order.orderComboLegs.reset(<span class="keyword">new</span> Order::OrderComboLegList());</div>
<div class="line">    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; legprices.size(); i++){</div>
<div class="line">        OrderComboLegSPtr comboLeg(<span class="keyword">new</span> OrderComboLeg());</div>
<div class="line">        comboLeg-&gt;price = legprices[i];</div>
<div class="line">        order.orderComboLegs-&gt;push_back(comboLeg);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span>(nonGuaranteed = <span class="keyword">true</span>){</div>
<div class="line">        TagValueSPtr tag1(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;NonGuaranteed&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>));</div>
<div class="line">        order.smartComboRoutingParams.reset(<span class="keyword">new</span> TagValueList());</div>
<div class="line">        order.smartComboRoutingParams-&gt;push_back(tag1);</div>
<div class="line">    }</div>
</div><!-- fragment -->  </li>
</ul>
<h1><a class="anchor" id="relativelimitcombo"></a>
Relative Limit Combo</h1>
<p>Create combination orders that include options, stock and futures legs (stock legs can be included if the order is routed through SmartRouting). Although a combination/spread order is constructed of separate legs, it is executed as a single transaction if it is routed directly to an exchange. For combination orders that are SmartRouted, each leg may be executed separately to ensure best execution. </p>
<ul>
<li>
Products: OPT, STK, FUT </li>
</ul>
<ul id="tab">
<li class="active">
<div class="fragment"><div class="line">            Order order = <span class="keyword">new</span> Order();</div>
<div class="line">            order.Action = action;</div>
<div class="line">            order.TotalQuantity = quantity;</div>
<div class="line">            order.OrderType = <span class="stringliteral">&quot;REL + LMT&quot;</span>;</div>
<div class="line">            order.LmtPrice = limitPrice;</div>
<div class="line">            <span class="keywordflow">if</span> (nonGuaranteed)</div>
<div class="line">            {</div>
<div class="line">                order.SmartComboRoutingParams = <span class="keyword">new</span> List&lt;TagValue&gt;();</div>
<div class="line">                order.SmartComboRoutingParams.Add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;NonGuaranteed&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>));</div>
<div class="line">            }</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">        Order order = <span class="keyword">new</span> Order();</div>
<div class="line">        order.action(action);</div>
<div class="line">        order.orderType(<span class="stringliteral">&quot;REL + LMT&quot;</span>);</div>
<div class="line">        order.totalQuantity(quantity);</div>
<div class="line">        order.lmtPrice(limitPrice);</div>
<div class="line">        <span class="keywordflow">if</span> (nonGuaranteed)</div>
<div class="line">        {</div>
<div class="line">            List&lt;TagValue&gt; smartComboRoutingParams = <span class="keyword">new</span> ArrayList&lt;TagValue&gt;();</div>
<div class="line">            smartComboRoutingParams.add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;NonGuaranteed&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>));</div>
<div class="line">        }</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">            Dim order As Order = New Order</div>
<div class="line">            order.Action = action</div>
<div class="line">            order.TotalQuantity = quantity</div>
<div class="line">            order.OrderType = <span class="stringliteral">&quot;REL + LMT&quot;</span></div>
<div class="line">            order.LmtPrice = limitPrice</div>
<div class="line">            If (nonGuaranteed) Then</div>
<div class="line">                order.SmartComboRoutingParams = New List(Of TagValue)</div>
<div class="line">                order.SmartComboRoutingParams.Add(New TagValue(&quot;NonGuaranteed&quot;, &quot;1&quot;))</div>
<div class="line">            End If</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">    Order order;</div>
<div class="line">    order.action = action;</div>
<div class="line">    order.totalQuantity = quantity;</div>
<div class="line">    order.orderType = <span class="stringliteral">&quot;Rel + LMT&quot;</span>;</div>
<div class="line">    order.lmtPrice = limitPrice;</div>
<div class="line">    <span class="keywordflow">if</span>(nonGuaranteed = <span class="keyword">true</span>){</div>
<div class="line">        TagValueSPtr tag1(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;NonGuaranteed&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>));</div>
<div class="line">        order.smartComboRoutingParams.reset(<span class="keyword">new</span> TagValueList());</div>
<div class="line">        order.smartComboRoutingParams-&gt;push_back(tag1);</div>
<div class="line">    }</div>
</div><!-- fragment -->  </li>
</ul>
<h1><a class="anchor" id="relativemarketcombo"></a>
Relative Market Combo</h1>
<p>Create combination orders that include options, stock and futures legs (stock legs can be included if the order is routed through SmartRouting). Although a combination/spread order is constructed of separate legs, it is executed as a single transaction if it is routed directly to an exchange. For combination orders that are SmartRouted, each leg may be executed separately to ensure best execution. </p>
<ul>
<li>
Products: OPT, STK, FUT </li>
</ul>
<ul id="tab">
<li class="active">
<div class="fragment"><div class="line">            Order order = <span class="keyword">new</span> Order();</div>
<div class="line">            order.Action = action;</div>
<div class="line">            order.TotalQuantity = quantity;</div>
<div class="line">            order.OrderType = <span class="stringliteral">&quot;REL + MKT&quot;</span>;</div>
<div class="line">            <span class="keywordflow">if</span> (nonGuaranteed)</div>
<div class="line">            {</div>
<div class="line">                order.SmartComboRoutingParams = <span class="keyword">new</span> List&lt;TagValue&gt;();</div>
<div class="line">                order.SmartComboRoutingParams.Add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;NonGuaranteed&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>));</div>
<div class="line">            }</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">        Order order = <span class="keyword">new</span> Order();</div>
<div class="line">        order.action(action);</div>
<div class="line">        order.orderType(<span class="stringliteral">&quot;REL + MKT&quot;</span>);</div>
<div class="line">        order.totalQuantity(quantity);</div>
<div class="line">        <span class="keywordflow">if</span> (nonGuaranteed)</div>
<div class="line">        {</div>
<div class="line">            List&lt;TagValue&gt; smartComboRoutingParams = <span class="keyword">new</span> ArrayList&lt;TagValue&gt;();</div>
<div class="line">            smartComboRoutingParams.add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;NonGuaranteed&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>));</div>
<div class="line">        }</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">            Dim order As Order = New Order</div>
<div class="line">            order.Action = action</div>
<div class="line">            order.TotalQuantity = quantity</div>
<div class="line">            order.OrderType = <span class="stringliteral">&quot;REL + MKT&quot;</span></div>
<div class="line">            If (nonGuaranteed) Then</div>
<div class="line"></div>
<div class="line">                order.SmartComboRoutingParams = New List(Of TagValue)</div>
<div class="line">                order.SmartComboRoutingParams.Add(New TagValue(&quot;NonGuaranteed&quot;, &quot;1&quot;))</div>
<div class="line">            End If</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">    Order order;</div>
<div class="line">    order.action = action;</div>
<div class="line">    order.totalQuantity = quantity;</div>
<div class="line">    order.orderType = <span class="stringliteral">&quot;Rel + MKT&quot;</span>;</div>
<div class="line">    <span class="keywordflow">if</span>(nonGuaranteed = <span class="keyword">true</span>){</div>
<div class="line">        TagValueSPtr tag1(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;NonGuaranteed&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>));</div>
<div class="line">        order.smartComboRoutingParams.reset(<span class="keyword">new</span> TagValueList());</div>
<div class="line">        order.smartComboRoutingParams-&gt;push_back(tag1);</div>
<div class="line">    }</div>
</div><!-- fragment -->  </li>
</ul>
<h1><a class="anchor" id="volatility"></a>
Volatility</h1>
<p>Specific to US options, investors are able to create and enter <a href="https://www.interactivebrokers.com/en/index.php?f=604" target="_blank" class="linkexternal">Volatility-type</a> orders for options and combinations rather than price orders. Option traders may wish to trade and position for movements in the price of the option determined by its implied volatility. Because implied volatility is a key determinant of the premium on an option, traders position in specific contract months in an effort to take advantage of perceived changes in implied volatility arising before, during or after earnings or when company specific or broad market volatility is predicted to change. In order to create a Volatility order, clients must first create a Volatility Trader page from the Trading Tools menu and as they enter option contracts, premiums will display in percentage terms rather than premium. The buy/sell process is the same as for regular orders priced in premium terms except that the client can limit the volatility level they are willing to pay or receive. </p>
<ul>
<li>
Products: FOP, OPT </li>
<li>
<a href="https://individuals.interactivebrokers.com/en/trading/orderTypeExchanges.php?ot=volat" target="_blank" class="linkexternal">Supported exchanges</a> </li>
</ul>
<ul id="tab">
<li class="active">
<div class="fragment"><div class="line">            Order order = <span class="keyword">new</span> Order();</div>
<div class="line">            order.Action = action;</div>
<div class="line">            order.OrderType = <span class="stringliteral">&quot;VOL&quot;</span>;</div>
<div class="line">            order.TotalQuantity = quantity;</div>
<div class="line">            order.Volatility = volatilityPercent;<span class="comment">//Expressed in percentage (40%)</span></div>
<div class="line">            order.VolatilityType = volatilityType;<span class="comment">// 1=daily, 2=annual</span></div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">        Order order = <span class="keyword">new</span> Order();</div>
<div class="line">        order.action(action);</div>
<div class="line">        order.orderType(<span class="stringliteral">&quot;VOL&quot;</span>);</div>
<div class="line">        order.volatility(volatilityPercent);<span class="comment">//Expressed in percentage (40%)</span></div>
<div class="line">        order.volatilityType(volatilityType);<span class="comment">// 1=daily, 2=annual</span></div>
<div class="line">        order.totalQuantity(quantity);</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">            Dim order As Order = New Order</div>
<div class="line">            order.Action = action</div>
<div class="line">            order.OrderType = <span class="stringliteral">&quot;VOL&quot;</span></div>
<div class="line">            order.TotalQuantity = quantity</div>
<div class="line">            order.Volatility = volatilityPercent  <span class="stringliteral">&#39;Expressed in percentage (40%)</span></div>
<div class="line"><span class="stringliteral">            order.VolatilityType = volatilityType  &#39;</span> 1=daily, 2=annual</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">    Order order;</div>
<div class="line">    order.action = action;</div>
<div class="line">    order.orderType = <span class="stringliteral">&quot;VOL&quot;</span>;</div>
<div class="line">    order.totalQuantity = quantity;</div>
<div class="line">    order.volatility = volatilityPercent; <span class="comment">//Expressed in percentage (40%)</span></div>
<div class="line">    order.volatilityType = volatilityType; <span class="comment">// 1=daily, 2=annual</span></div>
</div><!-- fragment -->  </li>
</ul>
<h1><a class="anchor" id="pegged_benchmark"></a>
Pegged to Benchmark</h1>
<p>The <a href="https://www.interactivebrokers.com/en/index.php?f=7100" target="_blank" class="linkexternal">Pegged to Benchmark </a> order is similar to the Pegged to Stock order for options, except that the Pegged to Benchmark allows you to specify any asset type as the reference (benchmark) contract for a stock or option order. Both the primary and reference contracts must use the same currency. </p>
<ul>
<li>
Products: STK, OPT </li>
<li>
<a href="https://www.interactivebrokers.com/en/index.php?f=3883?ot=pegbench" target="_blank" class="linkexternal">Supported exchanges</a> </li>
</ul>
<ul id="tab">
<li class="active">
<div class="fragment"><div class="line">            Order order = <span class="keyword">new</span> Order();</div>
<div class="line">            order.OrderType = <span class="stringliteral">&quot;PEG BENCH&quot;</span>;</div>
<div class="line">            <span class="comment">//BUY or SELL</span></div>
<div class="line">            order.Action = action;</div>
<div class="line">            order.TotalQuantity = quantity;</div>
<div class="line">            <span class="comment">//Beginning with price...</span></div>
<div class="line">            order.StartingPrice = startingPrice;</div>
<div class="line">            <span class="comment">//increase/decrease price..</span></div>
<div class="line">            order.IsPeggedChangeAmountDecrease = peggedChangeAmountDecrease;</div>
<div class="line">            <span class="comment">//by... (and likewise for price moving in opposite direction)</span></div>
<div class="line">            order.PeggedChangeAmount = peggedChangeAmount;</div>
<div class="line">            <span class="comment">//whenever there is a price change of...</span></div>
<div class="line">            order.ReferenceChangeAmount = referenceChangeAmount;</div>
<div class="line">            <span class="comment">//in the reference contract...</span></div>
<div class="line">            order.ReferenceContractId = referenceConId;</div>
<div class="line">            <span class="comment">//being traded at...</span></div>
<div class="line">            order.ReferenceExchange = referenceExchange;</div>
<div class="line">            <span class="comment">//starting reference price is...</span></div>
<div class="line">            order.StockRefPrice = stockReferencePrice;</div>
<div class="line">            <span class="comment">//Keep order active as long as reference contract trades between...</span></div>
<div class="line">            order.StockRangeLower = referenceContractLowerRange;</div>
<div class="line">            <span class="comment">//and...</span></div>
<div class="line">            order.StockRangeUpper = referenceContractUpperRange;</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">        Order order = <span class="keyword">new</span> Order();</div>
<div class="line">        order.orderType(<span class="stringliteral">&quot;PEG BENCH&quot;</span>);</div>
<div class="line">        <span class="comment">//BUY or SELL</span></div>
<div class="line">        order.action(action);</div>
<div class="line">        order.totalQuantity(quantity);</div>
<div class="line">        <span class="comment">//Beginning with price...</span></div>
<div class="line">        order.startingPrice(startingPrice);</div>
<div class="line">        <span class="comment">//increase/decrease price...</span></div>
<div class="line">        order.isPeggedChangeAmountDecrease(peggedChangeAmountDecrease);</div>
<div class="line">        <span class="comment">//by... (and likewise for price moving in opposite direction)</span></div>
<div class="line">        order.peggedChangeAmount(peggedChangeAmount);</div>
<div class="line">        <span class="comment">//whenever there is a price change of...</span></div>
<div class="line">        order.referenceChangeAmount(referenceChangeAmount);</div>
<div class="line">        <span class="comment">//in the reference contract...</span></div>
<div class="line">        order.referenceContractId(referenceConId);</div>
<div class="line">        <span class="comment">//being traded at...</span></div>
<div class="line">        order.referenceExchangeId(referenceExchange);</div>
<div class="line">        <span class="comment">//starting reference price is...</span></div>
<div class="line">        order.stockRefPrice(stockReferencePrice);</div>
<div class="line">        <span class="comment">//Keep order active as long as reference contract trades between...</span></div>
<div class="line">        order.stockRangeLower(referenceContractLowerRange);</div>
<div class="line">        <span class="comment">//and...</span></div>
<div class="line">        order.stockRangeUpper(referenceContractUpperRange);</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">            Dim order As Order = New Order</div>
<div class="line">            order.OrderType = <span class="stringliteral">&quot;PEG BENCH&quot;</span></div>
<div class="line">            <span class="stringliteral">&#39;BUY Or SELL</span></div>
<div class="line"><span class="stringliteral">            order.Action = action</span></div>
<div class="line"><span class="stringliteral">            order.TotalQuantity = quantity</span></div>
<div class="line"><span class="stringliteral">            &#39;</span>Beginning with price...</div>
<div class="line">            order.StartingPrice = startingPrice</div>
<div class="line">            <span class="stringliteral">&#39;increase/decrease price..</span></div>
<div class="line"><span class="stringliteral">            order.IsPeggedChangeAmountDecrease = peggedChangeAmountDecrease</span></div>
<div class="line"><span class="stringliteral">            &#39;</span>by... (And likewise <span class="keywordflow">for</span> price moving in opposite direction)</div>
<div class="line">            order.PeggedChangeAmount = peggedChangeAmount</div>
<div class="line">            <span class="stringliteral">&#39;whenever there Is a price change of...</span></div>
<div class="line"><span class="stringliteral">            order.ReferenceChangeAmount = referenceChangeAmount</span></div>
<div class="line"><span class="stringliteral">            &#39;</span>in the reference contract...</div>
<div class="line">            order.ReferenceContractId = referenceConId</div>
<div class="line">            <span class="stringliteral">&#39;being traded at...</span></div>
<div class="line"><span class="stringliteral">            order.ReferenceExchange = referenceExchange</span></div>
<div class="line"><span class="stringliteral">            &#39;</span>starting reference price Is...</div>
<div class="line">            order.StockRefPrice = stockReferencePrice</div>
<div class="line">            <span class="stringliteral">&#39;Keep order active as long as reference contract trades between...</span></div>
<div class="line"><span class="stringliteral">            order.StockRangeLower = referenceContractLowerRange</span></div>
<div class="line"><span class="stringliteral">            &#39;</span>And...</div>
<div class="line">            order.StockRangeUpper = referenceContractUpperRange</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">    Order order;</div>
<div class="line">    order.orderType = <span class="stringliteral">&quot;PEG BENCH&quot;</span>;</div>
<div class="line">    <span class="comment">//BUY or SELL</span></div>
<div class="line">    order.action = action;</div>
<div class="line">    order.totalQuantity = quantity;</div>
<div class="line">    <span class="comment">//Beginning with price...</span></div>
<div class="line">    order.startingPrice = startingPrice;</div>
<div class="line">    <span class="comment">//increase/decrease price..</span></div>
<div class="line">    order.isPeggedChangeAmountDecrease = peggedChangeAmountDecrease;</div>
<div class="line">    <span class="comment">//by... (and likewise for price moving in opposite direction)</span></div>
<div class="line">    order.peggedChangeAmount = peggedChangeAmount;</div>
<div class="line">    <span class="comment">//whenever there is a price change of...</span></div>
<div class="line">    order.referenceChangeAmount = referenceChangeAmount;</div>
<div class="line">    <span class="comment">//in the reference contract...</span></div>
<div class="line">    order.referenceContractId = referenceConId;</div>
<div class="line">    <span class="comment">//being traded at...</span></div>
<div class="line">    order.referenceExchangeId = referenceExchange;</div>
<div class="line">    <span class="comment">//starting reference price is...</span></div>
<div class="line">    order.stockRefPrice = stockReferencePrice;</div>
<div class="line">    <span class="comment">//Keep order active as long as reference contract trades between...</span></div>
<div class="line">    order.stockRangeLower = referenceContractLowerRange;</div>
<div class="line">    <span class="comment">//and...</span></div>
<div class="line">    order.stockRangeUpper = referenceContractUpperRange;</div>
</div><!-- fragment -->  </li>
</ul>
<p><br/>
<br/>
 </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.4-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">This website uses cookies. By navigating through it you agree to the use of cookies. Copyright Interactive Brokers 2016 </li>
  </ul>
</div>
</body>
</html>
